<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Générateur de Code WhatsApp</title>
<style>
:root{--background-color:#121212;--surface-color:#1e1e1e;--primary-color:#00a884;--text-color:#e1e1e1;--error-color:#f44336;--success-color:#4caf50;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
body{margin:0;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);display:flex;justify-content:center;align-items:center;min-height:100vh}
.container{width:100%;max-width:420px;padding:2rem;background-color:var(--surface-color);border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.25);text-align:center}
h1{color:var(--primary-color);margin:0 0 1rem;font-size:1.9rem}
p{margin:.25rem 0 1.5rem;opacity:.9}
.form{display:flex;gap:.5rem}
.phone-input{flex:1;padding:12px;background-color:#2a2a2a;border:1px solid #444;border-radius:6px;color:var(--text-color);font-size:1rem}
.phone-input::placeholder{color:#888}
.phone-input:focus{outline:none;border-color:var(--primary-color)}
.submit-button{padding:12px 16px;background-color:var(--primary-color);border:none;border-radius:6px;color:#fff;font-weight:700;cursor:pointer}
.submit-button:disabled{background-color:#555;cursor:not-allowed}
.status-box{margin-top:1rem;padding:.9rem;border-radius:8px;font-weight:500;display:none}
.status-box.info{background:#2196f330;border:1px solid #2196f3}
.status-box.success{background:#4caf5030;border:1px solid #4caf50}
.status-box.error{background:#f4433630;border:1px solid #f44336}
.code{font-size:2.2rem;font-weight:800;letter-spacing:8px;color:var(--primary-color);margin:.6rem 0;user-select:all}
.hint{font-size:.85rem;opacity:.8}
</style>
</head>
<body>
<div class="container">
  <h1>Pairage WhatsApp</h1>
  <p>Entrez votre numéro (ex: 243844899201) et récupérez le code.</p>
  <form id="form" class="form">
    <input id="phone" class="phone-input" type="tel" placeholder="Numéro au format international" required>
    <button id="btn" class="submit-button" type="submit">Générer</button>
  </form>
  <div id="box" class="status-box info"><span id="msg"></span><div id="code" class="code"></div></div>
  <div class="hint">Ouvrez WhatsApp → Appareils connectés → Lier un appareil → Entrer le code</div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
const ioClient=io()
const form=document.getElementById('form')
const phone=document.getElementById('phone')
const btn=document.getElementById('btn')
const box=document.getElementById('box')
const msg=document.getElementById('msg')
const codeEl=document.getElementById('code')
function show(t,type,c){box.style.display='block';box.className='status-box '+type;msg.textContent=t;codeEl.textContent=c?c.replace(/(\w{4})(?=\w)/g,'$1-'):''}
ioClient.on('status',s=>{show(s,s.startsWith('✅')?'success':'info')})
ioClient.on('pairing-code',c=>{show('✅ Code généré !','success',c);btn.disabled=false})
ioClient.on('pairing-error',e=>{show(e,'error');btn.disabled=false})
form.addEventListener('submit',e=>{e.preventDefault();btn.disabled=true;show('⌛ Génération en cours…','info');ioClient.emit('generate-code',phone.value)})
</script>
</body>
</html>
